import{dF as ee,dI as te,dE as re}from"./vendor-462626fd.js";function ne(D,I){for(var m=0;m<I.length;m++){const y=I[m];if(typeof y!="string"&&!Array.isArray(y)){for(const w in y)if(w!=="default"&&!(w in D)){const A=Object.getOwnPropertyDescriptor(y,w);A&&Object.defineProperty(D,w,A.get?A:{enumerable:!0,get:()=>y[w]})}}}return Object.freeze(Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}))}var B={exports:{}};/*!
 Name: vue-upload-component 
Component URI: https://github.com/lian-yue/vue-upload-component#readme 
Version: 3.1.7 
Author: LianYue 
License: Apache-2.0 
Description: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter 
 */(function(D,I){(function(m,y){D.exports=y(te)})(re,function(m){function y(n){return L(n)||R(n)||A(n)||w()}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(n,e){if(n){if(typeof n=="string")return j(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(n,e)}}function R(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function L(n){if(Array.isArray(n))return j(n)}function j(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function x(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function O(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?x(Object(t),!0).forEach(function(r){H(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function H(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function C(n){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(n)}function T(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function P(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T(Object(t),!0).forEach(function(r){X(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function q(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function V(n,e,t){return e&&_(n.prototype,e),t&&_(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function X(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var z=function(e){var t=new XMLHttpRequest;return t.open(e.method||"GET",e.url),t.responseType="json",e.headers&&Object.keys(e.headers).forEach(function(r){t.setRequestHeader(r,e.headers[r])}),t},J=function(e,t){return new Promise(function(r,i){e.onload=function(){if(e.status>=200&&e.status<300){var s;try{s=JSON.parse(e.response)}catch{s=e.response}r(s)}else i(e.response)},e.onerror=function(){return i(e.response)},e.send(JSON.stringify(t))})},F=function(e,t){var r=new FormData;for(var i in t)r.append(i,t[i]);return new Promise(function(s,o){e.onload=function(){if(e.status>=200&&e.status<300){var a;try{a=JSON.parse(e.response)}catch{a=e.response}s(a)}else o(e.response)},e.onerror=function(){return o(e.response)},e.send(r)})};function $(n){var e=z(n);return J(e,n.body)}var K=function(){function n(e,t){q(this,n),this.file=e,this.options=t,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return V(n,[{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var t=this,r=this.chunksUploaded.length/this.chunks.length*100,i=this.chunksUploading.reduce(function(s,o){return s+(o.progress|0)/t.chunks.length},0);return Math.min(r+i,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter(function(t){return!t.active&&!t.uploaded})}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter(function(t){return!!t.xhr&&!!t.active})}},{key:"chunksUploaded",get:function(){return this.chunks.filter(function(t){return!!t.uploaded})}},{key:"createChunks",value:function(){this.chunks=[];for(var t=0,r=this.chunkSize;t<this.fileSize;)this.chunks.push({blob:this.file.file.slice(t,r),startOffset:t,active:!1,retries:this.maxRetries}),t=r,r=t+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach(function(t){t.xhr.abort(),t.active=!1}),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var t=this;return this.promise=new Promise(function(r,i){t.resolve=r,t.reject=i}),this.start(),this.promise}},{key:"start",value:function(){var t=this;$({method:"POST",headers:P(P({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then(function(r){if(r.status!=="success")return t.file.response=r,t.reject("server");t.sessionId=r.data.session_id,t.chunkSize=r.data.end_offset,t.createChunks(),t.startChunking()}).catch(function(r){t.file.response=r,t.reject("server")})}},{key:"startChunking",value:function(){for(var t=0;t<this.maxActiveChunks;t++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(this.chunksUploading.length===0)return this.finish()}}},{key:"uploadChunk",value:function(t){var r=this;t.progress=0,t.active=!0,this.updateFileProgress(),t.xhr=z({method:"POST",headers:this.headers,url:this.action}),t.xhr.upload.addEventListener("progress",function(i){i.lengthComputable&&(t.progress=Math.round(i.loaded/i.total*100))},!1),F(t.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:t.startOffset,chunk:t.blob})).then(function(i){if(t.active=!1,i.status==="success")t.uploaded=!0;else if(t.retries--<=0)return r.stopChunks(),r.reject("upload");r.uploadNextChunk()}).catch(function(){if(t.active=!1,t.retries--<=0)return r.stopChunks(),r.reject("upload");r.uploadNextChunk()})}},{key:"finish",value:function(){var t=this;this.updateFileProgress(),this.stopSpeedCalc(),$({method:"POST",headers:P(P({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then(function(r){if(t.file.response=r,r.status!=="success")return t.reject("server");t.resolve(r)}).catch(function(r){t.file.response=r,t.reject("server")})}},{key:"startSpeedCalc",value:function(){var t=this;this.file.speed=0;var r=0;this.speedInterval||(this.speedInterval=window.setInterval(function(){var i=t.progress/100*t.fileSize;t.file.speed=i-r,r=i},1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}}]),n}(),U={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:K},N=m.defineComponent({props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{default:!1},multiple:{type:Boolean,default:!1},maximum:{type:Number},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},createDirectory:{type:Boolean,default:!1},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},timeout:{type:Number,default:0},drop:{type:[Boolean,String,HTMLElement],default:function(){return!1}},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{type:[RegExp,String,Array],default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return U}}},emits:["update:modelValue","input-filter","input-file"],data:function(){return{files:this.modelValue,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,uploading:0,destroy:!1,maps:{},dropElement:null,dropTimeout:null,reload:!1}},mounted:function(){var e=this,t=document.createElement("input");if(t.type="file",t.multiple=!0,window.FormData&&t.files?((typeof t.webkitdirectory=="boolean"||typeof t.directory=="boolean")&&(this.features.directory=!0),this.features.html5&&typeof t.ondrop<"u"&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var r=0;r<this.files.length;r++){var i=this.files[r];this.maps[i.id]=i}this.$nextTick(function(){e.$parent?(e.$parent.$forceUpdate(),e.$parent.$nextTick(function(){e.watchDrop(e.drop)})):e.watchDrop(e.drop)})},beforeUnmount:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1),this.watchActive(!1)},computed:{uploaded:function(){for(var e,t=0;t<this.files.length;t++)if(e=this.files[t],e.fileObject&&!e.error&&!e.success)return!1;return!0},chunkOptions:function(){return Object.assign(U,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]},forId:function(){return this.inputId||this.name},iMaximum:function(){return this.maximum===void 0?this.multiple?0:1:this.maximum},iExtensions:function(){if(this.extensions){if(this.extensions instanceof RegExp)return this.extensions;if(this.extensions.length){var e=[];return typeof this.extensions=="string"?e=this.extensions.split(","):e=this.extensions,e=e.map(function(t){return t.trim()}).filter(function(t){return t}),new RegExp("\\.("+e.join("|").replace(/\./g,"\\.")+")$","i")}}},iDirectory:function(){if(this.directory&&this.features.directory)return!0}},watch:{active:function(e){this.watchActive(e)},dropActive:function(e){this.watchDropActive(e),this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},modelValue:function(e){if(this.files!==e){this.files=e;var t=this.maps;this.maps={};for(var r=0;r<this.files.length;r++){var i=this.files[r];this.maps[i.id]=i}for(var s in this.maps){var o=this.maps[s],a=t[s];o!==a&&this.emitFile(o,a)}for(var l in t)this.maps[l]||this.emitFile(void 0,t[l])}}},methods:{newId:function(){return Math.random().toString(36).substr(2)},clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var t=0;t<e.length;t++)this.emitFile(void 0,e[t])}return!0},get:function(e){return e?C(e)==="object"?this.maps[e.id||""]||!1:this.maps[e]||!1:!1},add:function(e,t){var r;e instanceof Array?r=e:r=[e],t===void 0&&(t=this.addIndex);for(var i=[],s=0;s<r.length;s++){var o=r[s];this.features.html5&&o instanceof Blob&&(o={id:"",file:o,size:o.size,name:o.webkitRelativePath||o.relativePath||o.name||"unknown",type:o.type}),o=o;var a=!1;if(o.fileObject===!1||(o.fileObject||typeof Element<"u"&&o.el instanceof HTMLInputElement||typeof Blob<"u"&&o.file instanceof Blob)&&(a=!0),a&&(o=O(O({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},o),{},{response:{},progress:"0.00",speed:0}),o.data=O(O({},this.data),o.data?o.data:{}),o.headers=O(O({},this.headers),o.headers?o.headers:{})),o.id||(o.id=this.newId()),!this.emitFilter(o,void 0)&&(this.iMaximum>1&&i.length+this.files.length>=this.iMaximum||(i.push(o),this.iMaximum===1)))break}if(i.length){this.iMaximum===1&&this.clear();var l;if(t===!0||t===0)l=i.concat(this.files);else if(t){var d;l=this.files.concat([]),(d=l).splice.apply(d,[t,0].concat(y(i)))}else l=this.files.concat(i);this.files=l;var f=0;t===!0||t===0?f=0:t?t>=0?t+i.length>this.files.length?f=this.files.length-i.length:f=t:(f=this.files.length-i.length+t,f<0&&(f=0)):f=this.files.length-i.length,i=this.files.slice(f,f+i.length);for(var p=0;p<i.length;p++){var u=i[p];this.maps[u.id]=u}this.emitInput();for(var c=0;c<i.length;c++)this.emitFile(i[c],void 0);return e instanceof Array?i:i[0]}},addInputFile:function(e){var t=this,r=[];this.iMaximum;var i=e.webkitEntries||e.entries||void 0;if(i!=null&&i.length)return this.getFileSystemEntry(i).then(function(l){return t.add(l)});if(e.files)for(var s=0;s<e.files.length;s++){var o=e.files[s];r.push({id:"",size:o.size,name:o.webkitRelativePath||o.relativePath||o.name,type:o.type,file:o})}else{var a=e.value.replace(/\\/g,"/").split("/");(!a||!a.length)&&(a=[e.value]),delete e.__vuex__,r.push({id:"",name:a[a.length-1],el:e})}return Promise.resolve(this.add(r))},addDataTransfer:function(e){var t,r=this;if(e!=null&&(t=e.items)!==null&&t!==void 0&&t.length){for(var i=[],s=0;s<e.items.length;s++){var o=e.items[s],a=void 0;o.getAsEntry?a=o.getAsEntry()||o.getAsFile():o.webkitGetAsEntry?a=o.webkitGetAsEntry()||o.getAsFile():a=o.getAsFile(),a&&i.push(a)}return this.getFileSystemEntry(i).then(function(p){return r.add(p)})}var l=this.iMaximum,d=[];if(e.files.length){for(var f=0;f<e.files.length&&(d.push(e.files[f]),!(l>0&&d.length>=l));f++);return Promise.resolve(this.add(d))}return Promise.resolve([])},getFileSystemEntry:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(i){var s=t.iMaximum;if(!e){i([]);return}if(e instanceof Array){var o=[],a=function c(v){var b=e[v];if(!b||s>0&&o.length>=s)return i(o);t.getFileSystemEntry(b,r).then(function(h){o.push.apply(o,y(h)),c(v+1)})};a(0);return}if(e instanceof Blob){i([{id:"",size:e.size,name:r+e.name,type:e.type,file:e}]);return}if(e.isFile){var l=e;l.file(function(c){i([{id:"",size:c.size,name:r+c.name,type:c.type,file:c}])});return}if(e.isDirectory&&t.dropDirectory){var d=e,f=[];t.createDirectory&&f.push({id:"",name:r+d.name,size:0,type:"text/directory",file:new File([],r+d.name,{type:"text/directory"})});var p=d.createReader(),u=function c(){p.readEntries(function(v){var b=function h(g){if(!v[g]&&g===0||s>0&&f.length>=s)return i(f);if(!v[g])return c();t.getFileSystemEntry(v[g],r+d.name+"/").then(function(S){f.push.apply(f,y(S)),h(g+1)})};b(0)})};u();return}i([])})},replace:function(e,t){var r=this.get(e),i=this.get(t);if(!r||!i||r===i)return!1;var s=this.files.concat([]),o=s.indexOf(r),a=s.indexOf(i);return o===-1||a===-1?!1:(s[o]=i,s[a]=r,this.files=s,this.emitInput(),!0)},remove:function(e){var t=this.get(e);if(t){if(this.emitFilter(void 0,t))return!1;var r=this.files.concat([]),i=r.indexOf(t);if(i===-1)return console.error("remove",t),!1;r.splice(i,1),this.files=r,delete this.maps[t.id],this.emitInput(),this.emitFile(void 0,t)}return t},update:function(e,t){var r=this.get(e);if(r){var i=O(O({},r),t);if(r.fileObject&&r.active&&!i.active&&!i.error&&!i.success&&(i.error="abort"),this.emitFilter(i,r))return!1;var s=this.files.concat([]),o=s.indexOf(r);return o===-1?(console.error("update",r),!1):(s.splice(o,1,i),this.files=s,i=this.files[o],delete this.maps[r.id],this.maps[i.id]=i,this.emitInput(),this.emitFile(i,r),i)}return!1},emitFilter:function(e,t){var r=!1;return this.$emit("input-filter",e,t,function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r=i,r}),r},emitFile:function(e,t){var r,i=this;this.$emit("input-file",e,t),(r=e)!==null&&r!==void 0&&r.fileObject&&e.active&&(!t||!t.active)?(this.uploading++,this.$nextTick(function(){setTimeout(function(){e&&i.upload(e).then(function(){var s;e&&(e=i.get(e)||void 0),(s=e)!==null&&s!==void 0&&s.fileObject&&i.update(e,{active:!1,success:!e.error})}).catch(function(s){e&&i.update(e,{active:!1,success:!1,error:s.code||s.error||s.message||s})})},Math.ceil(Math.random()*50+50))})):(!e||!e.fileObject||!e.active)&&t&&t.fileObject&&t.active&&this.uploading--,this.active&&(!!e!=!!t||e.active!==t.active)&&this.watchActive(!0)},emitInput:function(){this.$emit("update:modelValue",this.files)},upload:function(e){var t=this.get(e);if(!t)return Promise.reject(new Error("not_exists"));if(!t.fileObject)return Promise.reject(new Error("file_object"));if(t.error)return t.error instanceof Error?Promise.reject(t.error):Promise.reject(new Error(t.error));if(t.success)return Promise.resolve(t);if(t.name&&this.iExtensions&&t.type!=="text/directory"&&t.name.search(this.iExtensions)===-1)return Promise.reject(new Error("extension"));if(this.size>0&&t.size!==void 0&&t.size>=0&&t.size>this.size&&t.type!=="text/directory")return Promise.reject(new Error("size"));if(this.customAction)return this.customAction(t,this);if(this.features.html5){if(this.shouldUseChunkUpload(t))return this.uploadChunk(t);if(t.putAction)return this.uploadPut(t);if(t.postAction)return this.uploadHtml5(t)}return t.postAction?this.uploadHtml4(t):Promise.reject(new Error("No action configured"))},shouldUseChunkUpload:function(e){return this.chunkEnabled&&!!this.chunkOptions.handler&&e.size&&e.size>this.chunkOptions.minSize},uploadChunk:function(e){var t=this.chunkOptions.handler;return e.chunk=new t(e,this.chunkOptions),e.chunk.upload().then(function(r){return e})},uploadPut:function(e){var t=[],r;for(var i in e.data)r=e.data[i],r!=null&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));var s=e.putAction||"",o=t.length?(s.indexOf("?")===-1?"?":"&")+t.join("&"):"",a=new XMLHttpRequest;return a.open("PUT",s+o),this.uploadXhr(a,e,e.file)},uploadHtml5:function(e){var t=new window.FormData,r;for(var i in e.data)r=e.data[i],r&&C(r)==="object"&&typeof r.toString!="function"?r instanceof File?t.append(i,r,r.name):t.append(i,JSON.stringify(r)):r!=null&&t.append(i,r);t.append(this.name,e.file,e.name||e.file.name||e.file.filename);var s=new XMLHttpRequest;return s.open("POST",e.postAction||""),this.uploadXhr(s,e,t)},uploadXhr:function(e,t,r){var i=this,s=t,o=0,a=0;e.upload.onprogress=function(d){if(s&&(s=i.get(s),!(!d.lengthComputable||!s||!s.fileObject||!s.active))){var f=Math.round(Date.now()/1e3);f!==o&&(o=f,s=i.update(s,{progress:(d.loaded/d.total*100).toFixed(2),speed:d.loaded-a}),a=d.loaded)}};var l=window.setInterval(function(){if(s&&(s=i.get(s))){var d;if((d=s)!==null&&d!==void 0&&d.fileObject&&!s.success&&!s.error&&s.active)return}l&&(clearInterval(l),l=void 0);try{e.abort(),e.timeout=1}catch{}},100);return new Promise(function(d,f){if(!s){f(new Error("not_exists"));return}var p,u=function(b){if(!p){if(p=!0,l&&(clearInterval(l),l=void 0),!s)return f(new Error("not_exists"));if(s=i.get(s),!s)return f(new Error("not_exists"));if(!s.fileObject)return f(new Error("file_object"));if(s.error)return s.error instanceof Error?f(s.error):f(new Error(s.error));if(!s.active)return f(new Error("abort"));if(s.success)return d(s);var h={};switch(b.type){case"timeout":case"abort":h.error=b.type;break;case"error":e.status?e.status>=500?h.error="server":e.status>=400&&(h.error="denied"):h.error="network";break;default:e.status>=500?h.error="server":e.status>=400?h.error="denied":h.progress="100.00"}if(e.responseText){var g=e.getResponseHeader("Content-Type");g&&g.indexOf("/json")!==-1?h.response=JSON.parse(e.responseText):h.response=e.responseText}return s=i.update(s,h),s?s.error?s.error instanceof Error?f(s.error):f(new Error(s.error)):d(s):f(new Error("abort"))}};e.onload=u,e.onerror=u,e.onabort=u,e.ontimeout=u,s.timeout&&(e.timeout=s.timeout);for(var c in s.headers)e.setRequestHeader(c,s.headers[c]);s=i.update(s,{xhr:e}),s&&e.send(r)})},uploadHtml4:function(e){var t=this,r=e;if(!r)return Promise.reject(new Error("not_exists"));var i=function(u){u.keyCode===27&&u.preventDefault()},s=document.createElement("iframe");s.id="upload-iframe-"+r.id,s.name="upload-iframe-"+r.id,s.src="about:blank",s.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var o=document.createElement("form");o.setAttribute("action",r.postAction||""),o.name="upload-form-"+r.id,o.setAttribute("method","POST"),o.setAttribute("target","upload-iframe-"+r.id),o.setAttribute("enctype","multipart/form-data");for(var a in r.data){var l=r.data[a];if(l&&C(l)==="object"&&typeof l.toString!="function"&&(l=JSON.stringify(l)),l!=null){var d=document.createElement("input");d.type="hidden",d.name=a,d.value=l,o.appendChild(d)}}o.appendChild(r.el),document.body.appendChild(s).appendChild(o);var f=function(){var u,c;try{s.contentWindow&&(c=s.contentWindow.document)}catch{}if(!c)try{c=s.contentDocument?s.contentDocument:s.document}catch{c=s.document}return(u=c)!==null&&u!==void 0&&u.body?c.body.innerHTML:null};return new Promise(function(p,u){setTimeout(function(){if(!r){u(new Error("not_exists"));return}if(r=t.update(r,{iframe:s}),!r)return u(new Error("not_exists"));var c=window.setInterval(function(){r&&(r=t.get(r))&&r.fileObject&&!r.success&&!r.error&&r.active||(c&&(clearInterval(c),c=void 0),s.onabort({type:r?"abort":"not_exists"}))},100),v,b=function(g){var S;if(!v){if(v=!0,c&&(clearInterval(c),c=void 0),document.body.removeEventListener("keydown",i),!r)return u(new Error("not_exists"));if(r=t.get(r),!r)return u(new Error("not_exists"));if(!r.fileObject)return u(new Error("file_object"));if(r.error)return r.error instanceof Error?u(r.error):u(new Error(r.error));if(!r.active)return u(new Error("abort"));if(r.success)return p(r);var k=f(),E={};if(typeof g=="string")return u(new Error(g));switch(g.type){case"abort":E.error="abort";break;case"error":r.error?E.error=r.error:k===null?E.error="network":E.error="denied";break;default:r.error?E.error=r.error:k===null?E.error="network":E.progress="100.00"}if(k!==null){if(k&&k.substr(0,1)==="{"&&k.substr(k.length-1,1)==="}")try{k=JSON.parse(k)}catch{}E.response=k}return r=t.update(r,E),r?(S=r)!==null&&S!==void 0&&S.error?r.error instanceof Error?u(r.error):u(new Error(r.error)):p(r):u(new Error("not_exists"))}};s.onload=b,s.onerror=b,s.onabort=b,document.body.addEventListener("keydown",i),o.submit()},50)}).then(function(p){var u;return s==null||(u=s.parentNode)===null||u===void 0||u.removeChild(s),p}).catch(function(p){var u;return s==null||(u=s.parentNode)===null||u===void 0||u.removeChild(s),p})},watchActive:function(e){for(var t,r=0;t=this.files[r];)if(r++,t.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;!t.active&&!t.error&&!t.success&&this.update(t,{active:!0})}else t.active&&this.update(t,{active:!1});this.uploading===0&&(this.active=!1)},watchDrop:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.features.drop&&e!==t){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDocumentDragenter,!1),document.removeEventListener("dragleave",this.onDocumentDragleave,!1),document.removeEventListener("dragover",this.onDocumentDragover,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch{}var r=null;if(e)if(typeof e=="string")r=document.querySelector(e)||this.$root.$el.querySelector(e);else if(e===!0){var i;if(r=this.$parent.$el,!r||((i=r)===null||i===void 0?void 0:i.nodeType)===8){var s;r=this.$root.$el,(!r||((s=r)===null||s===void 0?void 0:s.nodeType)===8)&&(r=document.body)}}else r=e;this.dropElement=r,this.dropElement&&(document.addEventListener("dragenter",this.onDocumentDragenter,!1),document.addEventListener("dragleave",this.onDocumentDragleave,!1),document.addEventListener("dragover",this.onDocumentDragover,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},watchDropActive:function(e,t){e!==t&&(this.dropTimeout&&(clearTimeout(this.dropTimeout),this.dropTimeout=null),e&&(this.dropTimeout=setTimeout(this.onDocumentDrop,1e3)))},onDocumentDragenter:function(e){var t,r;if(!this.dropActive&&e.dataTransfer){var i=e.dataTransfer;i!=null&&(t=i.files)!==null&&t!==void 0&&t.length?this.dropActive=!0:i.types?i.types.indexOf&&i.types.indexOf("Files")!==-1?this.dropActive=!0:(r=i.types)!==null&&r!==void 0&&r.contains&&i.types.contains("Files")&&(this.dropActive=!0):this.dropActive=!0,this.dropActive&&this.watchDropActive(!0)}},onDocumentDragleave:function(e){this.dropActive&&(e.target===e.explicitOriginalTarget||!e.fromElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight))&&(this.dropActive=!1,this.watchDropActive(!1))},onDocumentDragover:function(){this.watchDropActive(!0)},onDocumentDrop:function(){this.dropActive=!1,this.watchDropActive(!1)},onDragover:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),e.dataTransfer&&this.addDataTransfer(e.dataTransfer)},inputOnChange:async function(e){var t=this;if(!(e.target instanceof HTMLInputElement))return Promise.reject(new Error("not HTMLInputElement"));e.target;var r=function(s){return t.reload=!0,t.$nextTick(function(){t.reload=!1}),s};return this.addInputFile(e.target).then(r).catch(r)}}}),G=["for"],W=["name","id","accept","capture","disabled","webkitdirectory","allowdirs","directory","multiple"];function Y(n,e,t,r,i,s){return m.openBlock(),m.createElementBlock("span",{class:m.normalizeClass(n.className)},[m.renderSlot(n.$slots,"default"),m.createElementVNode("label",{for:n.forId},null,8,G),n.reload?m.createCommentVNode("",!0):(m.openBlock(),m.createElementBlock("input",{key:0,ref:"input",type:"file",name:n.name,id:n.forId,accept:n.accept,capture:n.capture,disabled:n.disabled,webkitdirectory:n.iDirectory,allowdirs:n.iDirectory,directory:n.iDirectory,multiple:n.multiple&&n.features.html5,onChange:e[0]||(e[0]=function(){return n.inputOnChange&&n.inputOnChange.apply(n,arguments)})},null,40,W))],2)}function Q(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var Z=`
.file-uploads {
  overflow: hidden;
  position: relative;
  text-align: center;
  display: inline-block;
}
.file-uploads.file-uploads-html4 input,
.file-uploads.file-uploads-html5 label {
  /* background fix ie  click */
  background: #fff;
  opacity: 0;
  font-size: 20em;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
.file-uploads.file-uploads-html5 input,
.file-uploads.file-uploads-html4 label {
  /* background fix ie  click */
  background: rgba(255, 255, 255, 0);
  overflow: hidden;
  position: fixed;
  width: 1px;
  height: 1px;
  z-index: -1;
  opacity: 0;
}
`;return Q(Z),N.render=Y,N})})(B);var M=B.exports;const ie=ee(M),ae=ne({__proto__:null,default:ie},[M]);export{ae as v};
